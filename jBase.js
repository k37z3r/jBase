/*!
* jBase Â© 2024 by Sven Minio is licensed under Attribution-NonCommercial-ShareAlike 4.0 International.
* To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/
* Link to Work: https://github.com/k37z3r/jBase
* Link to Creator Profile: https://github.com/k37z3r
*/
class JBase extends Array{constructor(e){if(super(),e==document||e instanceof HTMLElement||e==window)this.push(e);else{let elements=document.querySelectorAll(e);for(let i=0;i<elements.length;i++)this.push(elements[i])}}ready(_cb){this[0].addEventListener("readystatechange",(e=>{if("complete"===this[0].readyState)return _cb(),!0}))}each(_cb){if(_cb&&"function"==typeof _cb){for(let i=0;i<this.length;i++)_cb(this[i],i);return this}}addClass(arg){return this.each((function(e){e.classList.add(arg)})),this}removeClass(arg){return this.each((function(e){e.classList.remove(arg)})),this}val(arg){return arg?this.each((function(e){e.value=arg})):this.each((function(e){return e.value})),this}hasClass(arg){return this.each((function(e){e.classList.contains(arg)})),this}css(arg){return this.each((function(e){Object.assign(e.style,arg)})),this}attr(att,val=null){return val?this.each((function(e){e.setAttribute(att,val)})):this.each((function(e){e.getAttribute(att)})),this}removeAttr(arg){return this.each((function(e){e.removeAttribute(arg)})),this}html(arg){return arg?this.each((function(e){e.innerHTML=arg})):this.each((function(e){return e.innerHTML})),this}append(arg){return this.each((function(e){e.append(arg)})),this}toggleSlide(arg={}){let timers,transitions,transformIn,transformOut;return timers=Object.hasOwn(arg,"timer")?"slow"==arg.timer?"800ms":"fast"==arg.timer?"200ms":"moderate"==arg.timer?"500ms":arg.timer:"500ms",transitions=Object.hasOwn(arg,"transition")&&"ease"==arg.transition?"ease":"linear",Object.hasOwn(arg,"transform")&&Object.hasOwn(arg.transform,"in")&&Object.hasOwn(arg.transform,"out")?(transformIn=arg.transform.in,transformOut=arg.transform.out):(transformIn="translateY(0%)",transformOut="translateY(100%)"),this.each((function(e){"true"==e.getAttribute("status")?(e.setAttribute("status","false"),e.style.transform=transformOut,e.style.transitionTimingFunction=transitions,e.style.transition=timers):(e.setAttribute("status","true"),e.style.transform=transformIn,e.style.transitionTimingFunction=transitions,e.style.transition=timers)})),this}prepend(arg){return this.each((function(e){e.prepend(arg)})),this}hide(){return this.each((function(e){e.style.display="none"})),this}show(){return this.each((function(e){e.style.display="block"})),this}on(events,child,_cb=null,state=null){let arr=events.split(",");return null!=_cb?this.each((function(e){arr.forEach((event=>{event=event.trim(),e.addEventListener(event,(function(event){event.target.matches(child+", "+child+" *")&&_cb.apply(event.target.closest(child),arguments)}),!1)}))})):(_cb=child,this.each((function(e){arr.forEach((event=>{event=event.trim(),state?e.addEventListener(event,_cb,state):e.addEventListener(event,_cb,!1)}))}))),this}disable(arg){return arg?this.each((function(e){e.disabled=arg})):this.each((function(e){return e.disabled})),this}doScroll(arg={}){let tops,lefts,behaviors;return tops=Object.hasOwn(arg,"top")?arg.top:0,lefts=Object.hasOwn(arg,"left")?arg.left:0,behaviors=Object.hasOwn(arg,"behavior")?arg.behavior:"smooth",this.each((function(e){e.scroll({top:tops,left:lefts,behavior:behaviors})})),this}toggleClass(fstclass=null,scnclass=null){return fstclass&&this.each((function(e){scnclass?e.classList.contains(scnclass)?(e.classList.add(fstclass),e.classList.remove(scnclass)):(e.classList.add(scnclass),e.classList.remove(fstclass)):e.classList.contains(fstclass)?e.classList.remove(fstclass):e.classList.add(fstclass)})),this}click(){return this.each((function(e){e.click()})),this}focus(arg={}){let preventScrolls,focusVisibles;return this.each((function(e){preventScrolls=!!Object.hasOwn(arg,"scroll")&&!1===arg.scroll,focusVisibles=!Object.hasOwn(arg,"visible")||arg.visible,e.focus({preventScroll:preventScrolls,focusVisible:focusVisibles})})),this}}const $=function(e){return new JBase(e)};$.ajax=function(arg){let url=arg.url,type="get",success=function(){},fail=function(){};arg.success&&(success=arg.success),arg.fail&&(fail=arg.fail);let xhttp=new XMLHttpRequest;xhttp.onerror=function(error){return fail(error)},xhttp.onload=function(){if(4==this.readyState&&200==this.status){let response;try{response=JSON.parse(this.responseText)}catch(e){response=this.responseText}return success(response)}return fail(this.status)};let param="";arg&&(type=arg.type,"data"in arg&&(param=new URLSearchParams(arg.data).toString())),type&&"POST"==type.toUpperCase()?(xhttp.open("POST",url,!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send(param)):type&&"GET"!=type.toUpperCase()||(xhttp.open("GET",url+"?"+param,!0),xhttp.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhttp.send())};
